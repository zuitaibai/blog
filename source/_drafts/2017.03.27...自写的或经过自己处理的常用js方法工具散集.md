---
title: 自写的或经过自己处理的常用js方法工具散集
date: 2017-03-27 16:47:15
updated: 2017-03-27 16:47:15
tags:
  - js
  - 常用js方法
---


String
==========


``` bash
// 字符串长度
function strLen_cn(str){
    if(typeof str === 'undefined') return 0;
    str = str + '';
    return str.replace(/[^\x00-\xff]/g,"**").length;
}
//字符串截取
function strSub_cn(str, len, dot){
    if(typeof str === 'undefined') return 0; str = str + '';
    var start = i = 0, newStr = char = '', ll=str.length, cnReg = /[^\x00-\xff]/g;
    for(; i<ll; i++){
        start++;
        char = str.charAt(i).toString();
        char.match(cnReg) && start++;
        if(start > len) break;
        newStr += char;
    }
    dot && str.replace(cnReg,"**").length > len && ( newStr += dot );
    return newStr;
}
//去空格
function strTrim(str, wayNum){
     //wayNum:   -1：左，  0/undefined：两边   1:右   其它num：全部
     if(!str) return '';
     var regs={
         '0':/(^\s*)|(\s*$)/g,
         '-1':/(^\s*)/g,
         '1':/(\s*$)/g,
         '2':/\s+/g
     };
     wayNum = wayNum || 0;
     if(wayNum !==-1 && wayNum !==1 && wayNum !==0) wayNum = 2;
     return str.replace(regs[wayNum], '');
 }
```


Date & Time
=============

Url
=============
``` bash
//获得url中的param
function getURLParam(name,url) {
    url = url || location.search;
    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)', "ig").exec(url) || [, ""])[1].replace(/\+/g, '%20')) || null;
}
```

others
=============
``` bash
//深拷贝
function cloneObj(obj) {
    var o = obj.constructor == Object ? new obj.constructor() : new obj.constructor(obj.valueOf());
    for(var key in obj){
        if(o[key] != obj[key] ) o[key] = typeof(obj[key]) === 'object'? cloneObj(obj[key]) : obj[key];
    }
    return o;
}
//获取浏览器私有前缀
function prefix() {
    if (window.getComputedStyle) {
        var styles = window.getComputedStyle(document.documentElement, ''),
        pre = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o']))[1];
        return ('WebKit|Moz|MS|O').match(new RegExp('(' + pre + ')', 'i'))[1];
    }
    return '';
}
```

Regs(需时常更新)
==========

``` bash
mobile: /^0?(13[0-9]|15[012356789]|18[0236789]|14[57])[0-9]{8}$/
phone: /^((\+?[0-9]{2,4}\-[0-9]{3,4}\-)|([0-9]{3,4}\-))?([0-9]{7,8})(\-[0-9]+)?$/
email: /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/
url: /^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i
正整数: /^[0-9]*[1-9][0-9]*$/
负整数: /^-[0-9]*[1-9][0-9]*$/
正浮点数: /^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$/
负浮点数: /^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/
浮点数: /^(-?\d+)(\.\d+)?$/
```